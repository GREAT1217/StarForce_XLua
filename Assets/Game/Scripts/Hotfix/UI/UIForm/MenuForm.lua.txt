LuaForm = require("UI/LuaForm")

-- 菜单类
LuaForm:subType("MenuForm")
local this = MenuForm

-- 字段
this.m_ProcedureMenu = nil

-- 方法
function this:OnStartButtonClick()
    m_ProcedureMenu.StartGame()
end

function this:OnSettingButtonClick()
    CS.Game.GameEntry.UI.OpenUIForm(CS.Game.UIFormId.SettingForm)
end

function this:OnAboutButtonClick()
    CS.Game.GameEntry.UI.OpenUIForm(CS.Game.UIFormId.AboutForm)
end

function this:OnQuitButtonClick()
    local dialogParams = CS.Game.DialogParams()
    -- 待补充
end

function this:OnInit(userData)
    self.base.OnInit(self, userData)
    local reference = hotfixForm.ReferenceController
    quitButton = reference.GetGO("bt_Quit")
    quitButton:GetComponent(type(CS.UnityEngine.UI.Button)).OnClick.AddListener(OnQuitButtonClick)
end

function this:OnOpen(userData)
    self.base.OnOpen(self, userData)
    if userData == nil then
        Log.Error("HotfixUserData is null.")
        return
    end

    m_ProcedureMenu = userData.UserData
    if m_ProcedureMenu == nil then
        -- Log.Error("ProcedureMenu is invalid when open MenuForm.")
        return
    end
end

function this:OnClose(isShutDown, userData)
    m_ProcedureMenu = nil
    self.base.OnClose(self, isShutDown, userData)
end

return MenuForm