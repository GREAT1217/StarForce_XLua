---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 10.
--- DateTime: 2022/7/6 8:46
---

--- 面向对象基类。
Object = {}

--- 实例化对象。
function Object:new()
    local obj = {}
    self.__index = self
    setmetatable(obj, self)
    return obj
end

--- 声明对象子类。
function Object:subType(className)
    -- 根据名称生成表
    _G[className] = {}
    local obj = _G[className]
    --- 父类字段：base
    obj.base=self
    -- 设置元表和__index
    self.__index = self
    setmetatable(obj, self)
end

-- 声明类
Object:subType("GameObject")
GameObject.posX = 0
GameObject.posY = 0

function GameObject:Move()
    self.posX = self.posX + 1
    self.posY = self.posY + 1
end

-- 实例化对象
local object = GameObject:new()
print(object.posY)
object:Move()
print(obj.posY)

-- 声明子类
GameObject:subClass("Player")
function Player:Move()
    -- 调用父类方法，第一个参数传入自己
    self.base.Move(self);
end

-- 实例化子类对象
local player=Player:new()
print(player.posY)
player.Move()
print(player.posY)
